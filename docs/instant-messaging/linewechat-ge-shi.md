# Line?‡WeChat?¼å?è½‰æ?

\
**ä¸€??   Line?‡WeChatè¨Šæ¯?¼å?æ¯”è?**

**1.     ?¸å–®?¼å?**

LINE?–æ??¸å–® \[1]

æ­¥é?ä¸€ï¼šç™»?¥LINE@?»è…¦?ˆå???

æ­¥é?äºŒï?å»ºç??–æ?å½±éŸ³?§å®¹ > ?–æ??¸å–® > å»ºç??°é???

?¥è??¸æ??ä»¥?–ç?è£½ä??‘æ¨£?¿ï??´æ¥ä¸Šå‚³ä¸€å¼µå??‡ï?ä¸¦é¸?‡æƒ³è¦å??¾ç??–æ??¸å–®?¼å?ï¼Œå¯?‡å???\~6?¼ç??ˆæœ¬ï¼ˆæ³¨?ï?æ¬²ä??³ç??–ç?å¿…é??¨ä??ˆè¨­è¨ˆæ?ï¼Œå°±?«å¥½?Šæ?ï¼Œç¬¦?ˆæ¬²?ˆç¾?„æ ¼å¼ï??ç›´?¥ä??³æ•´å¼µå?ï¼?

?‰ç…§?«é¢ä¸Šç??‡ç¤ºï¼Œä??šé¸?‡ç?æ¨?¿ï¼Œå¡«å¯«é??¸é¸?®å?å¡Šè?è§¸ç™¼?„å?ä½?action)?Šå…§å®¹ï??™æ¬¡?„å?æ¡ˆè¨­å®??‹å?å¡Šåœ¨é»é¸å¾Œéƒ½?è??Œæ?å­—ã€ã€?

![](assets/lineimgmap.png)

??ä¸€ï¼šLine 7ç¨®ä??Œå??²æ??„å??‡é¸??

WeChat?ªå?ç¾©è???\[2]

1?è‡ªå®šç¾©?œå–®?€å¤šå????‹ä?ç´šè??®ï?æ¯å€‹ä?ç´šè??®æ?å¤šå????‹ä?ç´šè??®ã€?

2?ä?ç´šè??®æ?å¤??‹æ¼¢å­—ï?äºŒç??œå–®?€å¤??‹æ¼¢å­—ï?å¤šå‡ºä¾†ç??¨å?å°‡æ?ä»¥â€?..?ä»£?¿ã€?

3?å‰µå»ºè‡ªå®šç¾©?œå–®å¾Œï??œå–®?„åˆ·?°ç??¥æ˜¯ï¼Œåœ¨?¨æˆ¶?²å…¥?¬çœ¾?Ÿæ?è©±é??–å…¬?¾è?profile?æ?ï¼Œå??œç™¼?¾ä?ä¸€æ¬¡æ??–è??®ç?è«‹æ????†é?ä»¥å?ï¼Œå°±?ƒæ??–ä?ä¸‹è??®ï?å¦‚æ??œå–®?‰æ›´?°ï?å°±æ??·æ–°å®¢æˆ¶ç«¯ç??œå–®?‚æ¸¬è©¦æ??¯ä»¥?—è©¦?–æ??œæ³¨?¬çœ¾è³¬è?å¾Œå?æ¬¡é?æ³¨ï??‡å¯ä»¥ç??°å‰µå»ºå??„æ??œã€?

**?±æ–¼WeChat?¸å–®?„é??¶ï?Line?–æ??¸å–®?„å?å¡Šæ•¸å¦‚æ????„è©±ï¼Œé??†æ?2?‹ä?ç´šè??®ã€‚ä??¸å–®?ªèƒ½ä»¥æ?å­—ç?å½¢å??ˆç¾ï¼Œå??webhook** **?ªèƒ½ä»¥clickäº‹ä»¶?¹å?è§¸ç™¼ï¼ˆä??åœ¨Lineé»é¸?–æ??¸å–®ï¼Œä½¿?¨è€…æ??‹åˆ°?ªå·±?å‡º?‡å?ï¼‰ã€?*

?ªå?ç¾©è??®æ¥?£clickäº‹ä»¶ï¼?

é»æ??¨ä?ä»¶ç”¨?¶é??Šclické¡å??‰é?å¾Œï?å¾®ä¿¡?å??¨æ??šé?æ¶ˆæ¯?¥å£?¨é€æ??¯é??‹ç‚ºevent?„ç??†çµ¦?‹ç™¼?…ï??ƒè€ƒæ??¯æ¥????—ï?ï¼Œä¸¦ä¸”å¸¶ä¸Šæ??•ä¸­?‹ç™¼?…å¡«å¯«ç?key?¼ï??‹ç™¼?…å¯ä»¥é€šé??ªå?ç¾©ç?key?¼è??¨æˆ¶?²è?äº¤ä?

{

&#x20;   "button": \[

&#x20;       {

&#x20;           "name": "? å…¥?¬å?",

&#x20;           "sub\_button": \[

&#x20;               {

&#x20;                   "type": "click",

&#x20;                   "name": "?¬å¸è³‡è?",

&#x20;                   "key": "introduction"

&#x20;               },

&#x20;               {

&#x20;                   "type": "click",

&#x20;                   "name": "ä¿éšª?¬å¸",

&#x20;                   "key": "company"

&#x20;               },

&#x20;               {

&#x20;                   "type": "click",

&#x20;                   "name": "ä¸»å??†å?",

&#x20;                   "key": "product"

&#x20;               }

&#x20;           ]

&#x20;       },

&#x20;       {

&#x20;           "name": "å¹¸ç?æ»¿å?",

&#x20;           "sub\_button": \[

&#x20;               {

&#x20;                   "type": "click",

&#x20;                   "name": "?‹äººç¸¾æ?",

&#x20;                   "key": "performance"

&#x20;               },

&#x20;               {

&#x20;                   "type": "click",

&#x20;                   "name": "?¬å?è¡Œæ”¿",

&#x20;                   "key": "administrative"

&#x20;               },

&#x20;               {

&#x20;                   "type": "click",

&#x20;                   "name": "?¹è?ç«¶è³½",

&#x20;                   "key": "training"

&#x20;               }

&#x20;           ]

&#x20;       }

&#x20;   ]

}

**2.  ?‡å?è¨Šæ¯**

**Line Text message \[3]**

**{**

&#x20;   **"type": "text",**

&#x20;   **"text": "Hello, world"**

**}**

è¡?ä¸€ï¼šLine?‡å?è¨Šæ¯?©ä»¶(Message object)ä¹‹æ ¼å¼ï??ƒæ•¸?ªå??«é??‹è??‡å?

| **Property** | **Type** | **Required** | **Description**                                                                                                                                                                                                                                                               |
| ------------ | -------- | ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| type         | String   | Required     | text                                                                                                                                                                                                                                                                          |
| text         | String   | Required     | <p>Message text. You can include the following emoji:</p><ul><li>Unicode emoji</li><li>LINE original emoji (<a href="https://developers.line.me/media/messaging-api/emoji-list.pdf">Unicode codepoint table for LINE original emoji</a>)</li></ul><p>Max: 2000 characters</p> |

**WeChat?¼é€æ??¬æ???\[4]**

{

&#x20;   "touser":"OPENID",

&#x20;   "msgtype":"text",

&#x20;   "text":

&#x20;   {

&#x20;        "content":"Hello, World"

&#x20;   }

}

è¡?äºŒï?WeChat?‡æœ¬æ¶ˆæ¯ä¹‹æ ¼å¼ï??±æ–¼WeChatå°‡æ¥?¶æ–¹?„IDè¨­è??è??¯JSON?©ä»¶?„ä??¨å?ï¼Œæ?ä»¥å??¸å?äº†touser

| **?ƒæ•¸**  | **?¯å¦å¿…é?** | **?è¿°**                                 |
| ------- | -------- | -------------------------------------- |
| ToUser  | ??       | ?¥æ”¶?¹å¸³?Ÿï??¶åˆ°?„OpenIDï¼?                      |
| MsgType | ??       | text                                   |
| Content | ??       | ?å¾©?„æ??¯å…§å®¹ï??›è?ï¼šåœ¨contentä¸­èƒ½å¤ æ?è¡Œï?å¾®ä¿¡å®¢æˆ¶ç«¯å°±?¯æ??›è?é¡¯ç¤ºï¼?|

**3.  å½±å??°å?è¨Šæ¯**

**Line Imagemap message**

Imagemap è¨Šæ¯ç¯„ä? with tappable regions

{

&#x20;   "type": "imagemap",

&#x20;   "baseUrl": "https://storage.googleapis.com/goldeninsurancebroker-4392f.appspot.com/imageMap/training\_0629",

&#x20;   "altText": "?¹è?ç«¶è³½",

&#x20;   "baseSize": {

&#x20;       "width": 1040,

&#x20;       "height": 530

&#x20;   },

&#x20;   "actions": \[

&#x20;       {

&#x20;           "type": "uri",

&#x20;           "area": {

&#x20;               "x": 0,

&#x20;               "y": 201,

&#x20;               "width": 335,

&#x20;               "height": 410

&#x20;           },

&#x20;           "linkUri": \`${config.uriName}#/trainingCases/{lineId}\`

&#x20;       },

&#x20;       {

&#x20;           "type": "uri",

&#x20;           "area": {

&#x20;               "x": 335,

&#x20;               "y": 192,

&#x20;               "width": 345,

&#x20;               "height": 419

&#x20;           },

&#x20;           "linkUri": \`${config.uriName}#/achievements/{lineId}\`

&#x20;       },

&#x20;       {

&#x20;           "type": "uri",

&#x20;           "area": {

&#x20;               "x": 680,

&#x20;               "y": 189,

&#x20;               "width": 356,

&#x20;               "height": 422

&#x20;           },

&#x20;           "linkUri": hostName + "/broker\_system/views/lineLogin/personal.html?page=course"

&#x20;       }

&#x20;   ]

}

è¡?ä¸‰ï?Line å½±å??°å?è¨Šæ¯?¼å?ï¼Œå¯ä»¥ç??°imagemap ?•ä??©ä»¶?¯ä»¥?©ä»¶???å½¢å?è¡¨ç¾

| **Property**    | **Type**                                                                                                           | **Required** | **Description**                                                                                                                                          |
| --------------- | ------------------------------------------------------------------------------------------------------------------ | ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| type            | String                                                                                                             | Required     | imagemap                                                                                                                                                 |
| baseUrl         | String                                                                                                             | Required     | <p><a href="https://developers.line.me/en/reference/messaging-api/#base-url">Base URL</a> of image (Max: 1000 characters)<br> <strong>HTTPS</strong></p> |
| altText         | String                                                                                                             | Required     | <p>Alternative text<br> Max: 400 characters</p>                                                                                                          |
| baseSize.width  | Number                                                                                                             | Required     | Width of base image (set to 1040px)                                                                                                                      |
| baseSize.height | Number                                                                                                             | Required     | Height of base image (set to the height that corresponds to a width of 1040px)                                                                           |
| actions         | Array of [imagemap action objects](https://developers.line.me/en/reference/messaging-api/#imagemap-action-objects) | Required     | <p>Action when tapped<br> Max: 50</p>                                                                                                                    |

**Line Imagemap URI action object**

è¡??›ï??¿ä? actionsï¼Œimagemap action object

| **Property** | **Type**                                                                                            | **Required** | **Description**                                                                                                                                                               |
| ------------ | --------------------------------------------------------------------------------------------------- | ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| type         | String                                                                                              | Required     | uri                                                                                                                                                                           |
| label        | String                                                                                              | Optional     | <p>Label for the action. Spoken when the accessibility feature is enabled on the client device.<br> Max: 50 characters<br> Supported on LINE iOS version 8.2.0 and later.</p> |
| linkUri      | String                                                                                              | Required     | <p>Webpage URL<br> Max: 1000 characters</p>                                                                                                                                   |
| area         | [Imagemap area object](https://developers.line.me/en/reference/messaging-api/#imagemap-area-object) | Required     | Defined tappable area                                                                                                                                                         |

**WeChat?–æ?æ¶ˆæ¯ï¼ˆé??Šè·³è½‰åˆ°å¤–é?ï¼?*

?–æ?æ¶ˆæ¯æ¢æ•¸?åˆ¶??æ¢ä»¥?§ï?æ³¨æ?ï¼Œå??œå??‡æ•¸è¶…é?8ï¼Œå?å°‡æ??¡éŸ¿?‰ã€?

{

&#x20;   "touser":"OPENID",

&#x20;   "msgtype":"news",

&#x20;   "news":{

&#x20;       "articles": \[

&#x20;        {

&#x20;            "title":"èª²ç??™æ?",

&#x20;            "description":"?¹è?ç«¶è³½",

&#x20;            "url":\`${config.uriName}#/trainingCases/{lineId}\`,

&#x20;            "picurl":"?–ç¤ºç¶²å?"

&#x20;        },

&#x20;        {

&#x20;            "title":"ç«¶è³½?å‹µ",

&#x20;            "description":"?¹è?ç«¶è³½",

&#x20;            "url":\`${config.uriName}#/achievements/{lineId}\`,

&#x20;            "picurl":"?–ç¤ºç¶²å?"

&#x20;        },

&#x20;        {

&#x20;            "title":"?±å?å°ˆå?",

&#x20;            "description":"?¹è?ç«¶è³½",

&#x20;            "url": hostName + "/broker\_system/views/lineLogin/personal.html?page=course",

&#x20;            "picurl":"?–ç¤ºç¶²å?"

&#x20;        }

&#x20;        ]

&#x20;   }

}

**Line?„ImageMap action object?„æ•¸?è???æ¢ä»¥?§ï?ä¸”æ?ä¸€?‹é€???½é?è¦å¦å¤–å¡«å¯«æ?å­—è?è£½ä??–ç¤ºï¼Œæ??½ç›´?¥è??å–®ä¸€WeChat?–æ?æ¶ˆæ¯?‚å¦?‡é?è¦æ”¹ä»¥å??‡å??‡æ??¯æ?ç¶²é??„å½¢å¼å??¾è??¯ã€?*

è¡?äº”ï? WeChat?–æ?è¨Šæ¯?¼å?

| ?ƒæ•¸           | ?¯å¦å¿…é? | èªªæ?                                           |
| ------------ | ---- | -------------------------------------------- |
| ToUserName   | ??   | ?¥æ”¶?¹å¸³?Ÿï??¶åˆ°?„OpenIDï¼?                            |
| MsgType      | ??   | news                                         |
| ArticleCount | ??   | ?–æ?æ¶ˆæ¯?‹æ•¸ï¼Œé??¶ç‚º8æ¢ä»¥??                              |
| Articles     | ??   | å¤šæ??–æ?æ¶ˆæ¯ä¿¡æ¯ï¼Œé?èªç¬¬ä¸€?‹item?ºå¤§??æ³¨æ?ï¼Œå??œå??‡æ•¸è¶…é?8ï¼Œå?å°‡æ??¡éŸ¿??    |
| Title        | ??   | ?–æ?æ¶ˆæ¯æ¨™é?                                       |
| Description  | ??   | ?–æ?æ¶ˆæ¯?è¿°                                       |
| PicUrl       | ??   | ?–ç??ˆæ¥ï¼Œæ”¯?JPG?PNG?¼å?ï¼Œè?å¥½ç??ˆæ??ºå¤§??60\*200ï¼Œå???00\*200 |
| Url          | ??   | é»æ??–æ?æ¶ˆæ¯è·³è??ˆæ¥                                   |

**4.  ?‰é?æ¨?¿è¨Šæ¯**

**Line Buttons template**

{

&#x20;                   type: "template",

&#x20;                   altText: \`${companyName}è³‡è??¥è©¢\`,

&#x20;                   template: {

&#x20;                       type: "buttons",

&#x20;                       title: \`?¬å?iSmart?ºèƒ½ç§˜æ›¸\`,

&#x20;                       text: \`${companyName}ç¹³è²»è³‡è?\`,

&#x20;                       actions: \[

&#x20;                           {

&#x20;                               type: "uri",

&#x20;                               label: "?¥ç?è³‡è?",

&#x20;                               uri: \`${config.uriName}#/paymentInfo/${actionMessage.lineId}/${index}\`

&#x20;                           }

&#x20;                       ]

&#x20;                   }

&#x20;               }

Template with an image, title, text, and multiple action buttons.

è¡??­ï??‰é?æ¨?¿è¨Šæ¯?¼å?

| **Property**      | **Type**                                                                                         | **Required** | **Description**                                                                                                         |
| ----------------- | ------------------------------------------------------------------------------------------------ | ------------ | ----------------------------------------------------------------------------------------------------------------------- |
| type              | String                                                                                           | Required     | `buttons`                                                                                                               |
| thumbnailImageUrl | String                                                                                           | Optional     | <p>Image URL (Max: 1000 characters)<br> <strong>HTTPS</strong><br> JPEG or PNG<br> Max width: 1024px<br> Max: 1 MB</p>  |
| title             | String                                                                                           | Optional     | <p>Title<br> Max: 40 characters</p>                                                                                     |
| text              | String                                                                                           | Required     | <p>Message text<br> Max: 160 characters (no image or title)<br> Max: 60 characters (message with an image or title)</p> |
| actions           | Array of [action objects](https://developers.line.me/en/reference/messaging-api/#action-objects) | Required     | <p>Action when tapped<br> Max: 4</p>                                                                                    |

WeChat?¼é€å??‡æ??¯ï?é»æ?è·³è??°å??ˆï? ?–æ?æ¶ˆæ¯æ¢æ•¸?åˆ¶??æ¢ä»¥?§ï?æ³¨æ?ï¼Œå??œå??‡æ•¸è¶…é?8ï¼Œå?å°‡æ??¡éŸ¿?‰ã€?

{

&#x20;   "touser":"OPENID",

&#x20;   "msgtype":"news",

&#x20;   "news":{

&#x20;       "articles": \[

&#x20;        {

&#x20;            "title":\`?ŒConfirm templateä¹?actions?„ç¬¬ä¸€?‹label\`,

&#x20;            "description": "?ŒConfirm template?„text",

&#x20;            "url":\`${config.uriName}#/paymentInfo/${actionMessage.lineId}/${index}\`,

&#x20;            "picurl":"?–ç¤ºç¶²å?"

&#x20;        }

&#x20;        ]

&#x20;   }

}

**è½‰æ??WeChat?–æ?æ¶ˆæ¯?ªé?è¦å¦å¤–æ?ä¾›å?ç¤ºå³?¯ã€?*

**5.  ?Œç¢ºèªã€æ¨£?¿è???*

**Confirm template**

{

&#x20; "type": "template",

&#x20; "altText": "?ŒConfirm template ?„text ",

&#x20; "template": {

&#x20;     "type": "confirm",

&#x20;     "text": "? é?äººå£½\_äººèº«ä¿éšªè¦ä???,

&#x20;     "actions": \[

&#x20;         {

&#x20;           "type": "uri",

&#x20;           "label": "æª¢è?",

&#x20;           "uri": "?‡ä»¶ç¶²å?"

&#x20;         },

&#x20;         {

&#x20;            "type": "uri",

&#x20;           "label": "è½‰å‚³",

&#x20;           "uri": \`${config.uriName}#/forward/${lineId}/${fileId}/${type}\`

&#x20;         }

&#x20;     ]

&#x20; }

}

Template with two action buttons.

è¡?ä¸?

| **Property** | **Type**                                                                                         | **Required** | **Description**                                               |   |   |
| ------------ | ------------------------------------------------------------------------------------------------ | ------------ | ------------------------------------------------------------- | - | - |
| type         | String                                                                                           | Required     | `confirm`                                                     |   |   |
| text         | String                                                                                           | Required     | <p>Message text<br> Max: 240 characters</p>                   |   |   |
| actions      | Array of [action objects](https://developers.line.me/en/reference/messaging-api/#action-objects) | Required     | <p>Action when tapped<br> Set 2 actions for the 2 buttons</p> |   |   |
|              |                                                                                                  |              |                                                               |   |   |

WeChat?¼é€å??‡æ??¯ï?é»æ?è·³è??°å??ˆï? ?–æ?æ¶ˆæ¯æ¢æ•¸?åˆ¶??æ¢ä»¥?§ï?æ³¨æ?ï¼Œå??œå??‡æ•¸è¶…é?8ï¼Œå?å°‡æ??¡éŸ¿?‰ã€?

{

&#x20;   "touser":"OPENID",

&#x20;   "msgtype":"news",

&#x20;   "news":{

&#x20;       "articles": \[

&#x20;        {

&#x20;            "title":"?ŒConfirm template ?„text \n?ŒConfirm templateä¹?actions?„ç¬¬ä¸€?‹label ",

&#x20;            "description":" ?ŒConfirm template ?„text",

&#x20;            "url":"?ŒConfirm templateä¹?actions?„ç¬¬ä¸€?‹uri ?‡ä»¶ç¶²å? ",

&#x20;            "picurl":"?–ç¤ºç¶²å?"

&#x20;        },

&#x20;        {

&#x20;            "title":"?ŒConfirm templateä¹?actions?„ç¬¬äºŒå€‹label ",

&#x20;            "description":"??Confirm template ?„text",

&#x20;            "url":\`${config.uriName}#/forward/${lineId}/${fileId}/${type}\`,

&#x20;            "picurl":"?–ç¤ºç¶²å?"

&#x20;        }

&#x20;        ]

&#x20;   }

}

**è½‰æ??WeChat?–æ?æ¶ˆæ¯?ˆè??¦å??ä??–ç¤ºï¼Œä?news articlesä¹‹ç¬¬ä¸€?‹titleè¦å??«Confirm template ?„textï¼Œä»¥?¿å??¶descriptionæ²’æ?é¡¯ç¤º?‚ï?ä½¿ç”¨?…è????è¾¨è©²?–æ?æ¶ˆæ¯?„ç”¨?”ã€?*

?¶WeChat?–æ?æ¶ˆæ¯?ªæ?ä¸€æ¢æ?ï¼Œnews articlesä¹‹title?‡description?„é?ä¿?

?¶WeChat?–æ?æ¶ˆæ¯?‰å…©æ¢ï??«ï?ä»¥ä??‚ï??ªæ?news articlesä¹‹title?ƒé¡¯ç¤ºå‡ºä¾?
