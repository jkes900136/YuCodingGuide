# IIS 24小時不間斷運作應用程式效能最佳化撇步

IIS預設會以「最節省伺服器資源」的方式執行應用程式，對於效能吃緊的電腦來說是很有幫助。但卻造成用戶經常向資訊部門反映網頁隔一段時間沒用，載入等待過久的問題......

![](../.gitbook/assets/image.png)

這問題的答案藏在IIS「 應用程式集區->進階設定」內：

## 1. 一般&#x20;

佇列長度 預設值是 1000，當封包數量在瞬間到達該值，之後的請求都會回傳 HTTP Status 503 Service Unavailable。

{% hint style="info" %}
若常態請求數量未超過、伺服器效能不足的情況下就無須調整，以免CPU使用率虛增
{% endhint %}

啟動模式 預設值是 OnDemand，當網站執行回收後，會等到第一個請求進來，IIS 才會把網站啟動。 所以第一個連上來的使用者會等到比較久的時間，集區初始化完成後，使用者才會得到回應。

{% hint style="info" %}
建議改為 AlwaysRunning，當網站執行回收後，IIS 就會直接啟動集區。
{% endhint %}

## 2.回收

固定時間間隔 預設值是 1740，即每隔 29 小時 IIS 就會把該應用程式集區重啟。 有可能當下使用者正在操作，對於不能中斷的系統來說，這挺不妥當。

{% hint style="info" %}
建議改為 0，停用定期重啟集區。
{% endhint %}

## 3.處理序模型

閒置逾時動作 預設值是 Terminate，當網站閒置超過指定分鐘數，IIS 就會把集區終止並釋放資源，直到下個使用者請求進來，集區才會重新啟動。動作類似啟動模式。

{% hint style="info" %}
建議改為 Suspend，此動作是把集區狀態暫存在記憶體，只停止 CPU 運算此集區的程式和快取記憶體，當停止後第一個請求進來，能快速的恢復網站運作。
{% endhint %}
